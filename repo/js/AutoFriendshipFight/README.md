# 自动好感度刷取脚本 (AutoFriendshipTreasureHunters)

## 功能简介

自动化刷取角色好感度的脚本，支持盗宝团和愚人众两种敌人类型。通过自动触发和完成突发任务来获得好感度经验。

## 敌人类型支持

### 盗宝团好感
- **触发任务**: 
  - 岛上无贼 - 消灭鬼鬼祟祟的盗宝团
- **特殊功能**: 支持清理原住民（丘丘人）
- **战斗坐标**: 稻妻地区指定位置

### 愚人众好感  
- **触发任务**: 
  - 丘丘人今晚的伙食 - 打倒所有丘丘人
  - 买卖不成正义存 - 打倒愚人众与镀金旅团
  - 禁止危险运输！ - 打倒所有盗宝团
- **战斗坐标**: 须弥地区专门位置

## 使用前准备

### 1. BetterGI配置
- **地图追踪行走配置**:
  - ✅ 勾选"只在传送点时回复"
  - ✅ 勾选"允许在JsScript使用"
  - ✅ 勾选"覆盖JS中的自动战斗配置"

- **战斗配置**
  - **战斗策略**: 根据队伍选择合适的战斗策略文件
  - **练度要求**: 建议较高练度，纯好感队可能无法击败敌人
  - **重要设置**: ❌ 关闭"自动检测战斗结束" (如果勾选清理丘丘人，则需要打开)

- **队伍推荐**
- 至少1-2个主力输出角色，针对性的定制战斗策略
- 建议携带治疗角色保证生存，失败会丢失好感任务次数，并且会显著增加任务时间
- 避免使用纯好感队伍（练度不足）

## 脚本设置

### 基础设置
- **敌人类型**: 选择"盗宝团"或"愚人众"
- **运行次数**: 设置刷取次数（默认10次）
  - 运行次数的上限是50次，前10次可以获取好感
- **队伍名称**: 指定使用的队伍配置
- **OCR超时**: OCR检测超时时间（默认10秒），
  - 过短可能会识别失败导致结束任务；
  - 过长则会长时间检测导致罚站时间过长；
  - 推荐保持默认值。
- **战斗超时**: 单次战斗超时时间（默认120秒）
  - 战斗超时会直接取消任务，因此不建议过短
  - 脚本会自动检测任务结束，识别精度非常高，不用担心因为超时太长罚站

### 高级设置
- **清理原住民**: 仅盗宝团模式有效，清理丘丘人
- **卡时间模式**: 支持按日期周期运行

## 运行流程

1. **队伍切换**: 自动切换到指定队伍
2. **准备阶段**: 
   - 盗宝团: 可选清理丘丘人 → 前往触发点
   - 愚人众: 直接前往触发点
3. **任务检测**: 使用OCR检测突发任务触发
4. **战斗执行**: 自动导航到战斗点并开始战斗
5. **结果判定**: 检测战斗结果并记录
6. **循环执行**: 重复上述流程直到完成设定次数

## 注意事项

### ⚠️ 重要提醒
- 脚本运行时请勿手动操作游戏
- 请按照指引操作

### 🔧 故障排除
- **战斗策略没有生效**: 勾选"覆盖JS中的自动战斗配置"，并在战斗配置设置相应的战斗策略
- **战斗失败**: 检查队伍配置和战斗策略，提升角色练度
- **超时结束**: 增加战斗超时时间
- **OCR超时，但实际触发了任务**: 尝试提高OCR超时时间，否则提出issue
- **路径错误**: 确保相关路径文件存在于assets/AutoPath目录
- **其他错误**：在github上提出issue

### 📊 效率优化
- 使用高练度队伍可提高战斗效率
- 选择合适的敌人类型以匹配队伍配置

## 文件依赖

- `main.js`: 主要脚本逻辑
- `settings.json`: 配置文件
- `assets/AutoPath/`: 路径文件目录
  - `盗宝团-准备.json`: 盗宝团准备阶段路径，清理丘丘人
  - `盗宝团-触发点.json`: 盗宝团触发点路径
  - `盗宝团-战斗点.json`: 盗宝团战斗点路径
  - `愚人众-准备.json`: 愚人众准备阶段路径，从传送点到触发点
  - `愚人众-触发点.json`: 愚人众触发点路径
  - `愚人众-战斗点.json`: 愚人众战斗点路径


## 更新日志

- **1.3**: 新增愚人众支持，优化敌人类型切换
- **1.2**: 战斗触发检测，异步检测战斗结束
- **1.1**: 盗宝团重登功能优化
- **1.0**: 基础盗宝团好感度刷取功能